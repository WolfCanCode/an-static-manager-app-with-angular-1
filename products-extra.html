<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Hà Tools</title>
  <meta name="keywords" content="HTML5,CSS3,Admin Template" />
  <meta name="description" content="" />
  <meta name="Author" content="HaTool" />

  <!-- mobile settings -->
  <meta name="viewport" content="width=device-width, maximum-scale=1, initial-scale=1, user-scalable=0" />
  <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->

  <!-- WEB FONTS : use %7C instead of | (pipe) -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400%7CRaleway:300,400,500,600,700%7CLato:300,400,400italic,600,700"
    rel="stylesheet" type="text/css" />

  <!-- CORE CSS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
  <link href="assets/plugins/simple-line-icons-master/css/simple-line-icons.css" rel="stylesheet" type="text/css" />
  <link href="assets/plugins/animate/animate.css" rel="stylesheet" type="text/css" />
  <link href="assets/plugins/ui/jquery-ui.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/plugins/toastr/toastr.min.css" />
  <!-- THEME CSS -->
  <link href="assets/css/style.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/theme/dark.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.9/sweetalert2.min.css">
  <link rel="manifest" href="/manifest.json">
  <link href="https://cdn.rawgit.com/mdehoog/Semantic-UI-Calendar/76959c6f7d33a527b49be76789e984a0a407350b/dist/calendar.min.css"
    rel="stylesheet" type="text/css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.9/sweetalert2.min.js"></script>
  <script src="https://cdn.rawgit.com/mdehoog/Semantic-UI-Calendar/76959c6f7d33a527b49be76789e984a0a407350b/dist/calendar.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular.min.js"></script>
  <script src="assets/plugins/calendar/moment.min.js"></script>
  <script src="assets/plugins/toastr/toastr.min.js"></script>
  <script src="assets/plugins/ui/jquery-ui.js"></script>

</head>

<body ng-app="">

  <!-- wrapper -->
  <div id="wrapper">
    <!-- BEGIN HEADER -->
    <div class="page-header navbar fixed-top">
      <!-- BEGIN HEADER INNER -->
      <div class="page-header-inner ">
        <!-- BEGIN LOGO -->
        <div class="menu-toggler sidebar-toggler">
          <h2 style="font-size: 20px;
            float: right;
            margin-left: 25px;
            color: white;"> Hà Tools</h2>

          <a href="javascript:;" id="menubtn" class="navbar-minimalize minimalize-styl-2  float-left ">
            <i class="fa fa-bars"></i>
          </a>
        </div>
      </div>
      <!-- END LOGO -->

      <!-- BEGIN TOP NAVIGATION MENU -->

      <!-- END USER LOGIN DROPDOWN -->
      <!-- BEGIN QUICK SIDEBAR TOGGLER -->
      <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->

      <!-- END QUICK SIDEBAR TOGGLER -->
    </div>
    <!-- END TOP NAVIGATION MENU -->
    <!-- END HEADER INNER -->
  </div>
  <!-- END HEADER -->
  <!-- BEGIN HEADER & CONTENT dropdown-divider -->
  <div class="clearfix"> </div>
  <!-- END HEADER & CONTENT dropdown-divider -->

  <!-- BEGIN CONTAINER -->
  <div class="page-container" ng-controller="moneyController">

    <aside class="sidebar">
      <nav class="sidebar-nav">
        <ul class="metismenu" id="menu">
          <li class="">
            <a href="/">
              <i class="icon options"></i>
              <span class="nav-label">Quản lý chung</span>
            </a>


          </li>
          <li class="">
            <a href="#" style="background: lightslategrey !important;">
              <span class="nav-label">Quản trị</span>
            </a>


          </li>
          <li class="">
            <a href="/products" style="background:#0D47A1">
              <i class="icon shopping bag"></i>
              <span class="nav-label">Thêm sp</span>
            </a>
          </li>
          <li class="">
            <a href="/products">
              <i class="icon shopping bag"></i>
              <span class="nav-label">Nhập lô</span>
            </a>
          </li>
          <li class="">
            <a href="/products">
              <i class="icon shopping bag"></i>
              <span class="nav-label">Thêm kh</span>
            </a>
          </li>
          <li class="active">
            <a href="/result">
              <i class="icon industry"></i>
              <span class="nav-label">Thống kê hàng</span>
            </a>
          </li>
        </ul>
        <!-- END SIDEBAR MENU -->
        <!-- END SIDEBAR MENU -->
      </nav>
      <!-- END SIDEBAR -->
    </aside>

    <!-- BEGIN CONTENT BODY -->
    <div class="page-content-wrapper">
      <div class="content-wrapper container">
        <div class="row">
          <div class="col-sm-12">
            <div class="page-title">

              <h4 class="float-left">Nhập hàng</h4>


            </div>
          </div>
        </div>
        <!-- end .page title-->
        <form class="ui form">
          <div class="field">
            <label>Chọn sản phẩm:</label>
            <select class="ui search dropdown" ng-model="product_id">
              <option value="">Chọn sản phẩm</option>
              <option ng-repeat="prod in prods" value="{{prod.id}}">{{prod.code}} - {{prod.name}}</option>

            </select>
          </div>

          <div class="field">
            <label>Số lượng nhập:</label>
            <div class="field">
              <div class="ui left icon input">
                <input type="number" placeholder="Nhập số lượng" ng-model="soluongnhap" required>
                <i class="cube icon"></i>
              </div>
            </div>
          </div>

          <div class="field">
            <label>Số tiền nhập:</label>
            <div class="field">
              <div class="ui left icon input">
                <input type="number" placeholder="Nhập số tiền" ng-model="sotiennhap" required>
                <i class="icon shopping bag"></i>
              </div>
            </div>
          </div>

          <div class="ui green button" id="add" ng-click="addToWareHouse()">
            <i class="plus icon"></i> Thêm mới
          </div>
      </div>

    </div>
    <!-- END CONTENT BODY -->
    <!-- END CONTAINER -->
    <!-- /wrapper -->


    <!-- SCROLL TO TOP -->

    <!-- /PRELOADER -->
  </div>

  <script>
    $('.menu-toggler').click(function () {
      if ($('.sidebar').hasClass("sidebar-right")) {
        $('.sidebar').removeClass('sidebar-right');
        $('.page-content-wrapper').removeClass('blur-backdrop');
      } else {
        $('.sidebar').addClass('sidebar-right');
        $('.page-content-wrapper').addClass('blur-backdrop');
      }
    })

    $('.page-content-wrapper').click(function () {
      $('.sidebar').removeClass('sidebar-right');
      $('.page-content-wrapper').removeClass('blur-backdrop');
    })

    $('.ui.dropdown')
      .dropdown();

    function moneyController($scope, $http) {

      /* DECLARE */
      $scope.prods = [];
      $scope.product_id = '';
      $scope.soluongnhap = 0;
      $scope.sotiennhap = 0;

      var productUrl = 'http://localhost:1337/product';
      var productExtra = 'http://localhost:1336/product_extra';
      $http.get(productUrl).success(function (response) {
        $scope.prods = response;
      });

      $scope.addToWareHouse = function () {
          let param = {
            product_id: $scope.product_id,
            import_quantity: $scope.soluongnhap,
            import_price: $scope.sotiennhap
          };
          $("#add").addClass('loading');

          $http.post(productExtra, param).success(function (response) {
              toastr.success('Thêm mới sản phẩm thành công');
              $("#add").removeClass('loading');
              $scope.product_id = '';
              $scope.soluongnhap = 0;
              $scope.sotiennhap = 0;
            }
          }
  </script>
  <div class="footer">
    <span class="footer-text left">ver 0.3</span>
    <span class="footer-text right">Ha Tools application</span>
  </div>
</body>

</html>